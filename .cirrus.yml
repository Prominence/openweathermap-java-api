container:
  image: gradle:jdk17

testCoverage_task:
  gradle_cache:
    folder: ~/.gradle/caches
  testCoverage_script: gradle jacocoTestReport && bash <(curl -s https://codecov.io/bash)
  cleanup_before_cache_script:
    - rm -rf ~/.gradle/caches/$GRADLE_VERSION/
    - rm -rf ~/.gradle/caches/transforms-1
    - rm -rf ~/.gradle/caches/journal-1
    - rm -rf ~/.gradle/caches/jars-3/*/buildSrc.jar
    - find ~/.gradle/caches/ -name "*.lock" -type f -delete
